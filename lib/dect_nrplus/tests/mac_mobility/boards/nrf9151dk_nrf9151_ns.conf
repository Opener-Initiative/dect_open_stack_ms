# # /* lib/dect_nrplus/tests/mac_security/boards/nrf9151dk_nrf9151_ns.conf */
# # // Overview: Board-specific Kconfig for the mac_security test on the nRF9151 DK. It enables the hardware-accelerated crypto backend via NRF_SECURITY.
# # Use the Nordic Security backend, which enables the CryptoCell hardware
# # and satisfies the PSA API dependencies selected by the library.
# CONFIG_NRF_SECURITY=y

# # Enable Flash and NVS dependencies
# CONFIG_FLASH=y
# CONFIG_FLASH_MAP=y
# CONFIG_NVS=y

# # Enable Partition Manager, which is required for FIXED_PARTITION_* macros
# CONFIG_PARTITION_MANAGER_ENABLED=y

# # Enable RTT for logging on the DK
# CONFIG_USE_SEGGER_RTT=y
# CONFIG_RTT_CONSOLE=y

# /* prj.conf */
# // Overview: Project configuration for running the stack_integration test on an nRF9151 DK. It enables hardware drivers, the real nRF Modem Library, and the full DECT NR+ stack.
# Enable Ztest framework
CONFIG_ZTEST=y

#==============================================================================
# Kernel and System Configuration
#==============================================================================
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# Enable standard OS features
CONFIG_PRINTK=y
CONFIG_ASSERT=y

#==============================================================================
# Board and Hardware Drivers
#==============================================================================
# Enable UART for logging output
# CONFIG_SERIAL=y
# CONFIG_UART_CONSOLE=y
# CONFIG_CONSOLE=y
# CONFIG_LOG=y
# CONFIG_LOG_MODE_IMMEDIATE=y

# # Enable RTT for logging on the DK
# CONFIG_USE_SEGGER_RTT=y
# CONFIG_RTT_CONSOLE=y

# Use the Nordic Security backend, which enables the CryptoCell hardware
# and satisfies the PSA API dependencies selected by the library.
CONFIG_NRF_SECURITY=y

# Enable hardware entropy for random number generation
CONFIG_ENTROPY_GENERATOR=y
CONFIG_ENTROPY_DEVICE_RANDOM_GENERATOR=y

# Enable flash for the settings subsystem
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y
CONFIG_SETTINGS=y
CONFIG_SETTINGS_NVS=y
CONFIG_NVS=y

# Enable Partition Manager, which is required for FIXED_PARTITION_* macros
CONFIG_PARTITION_MANAGER_ENABLED=y

#==============================================================================
# nRF Modem Library Configuration
#==============================================================================
CONFIG_NRF_MODEM_LIB=y

# Enable the DECT NR+ PHY
# CONFIG_NRF_MODEM_DECT_PHY=y

# Set the modem's system mode to DECT NR+ only.
# This is critical for dedicating the radio to NR+.
# CONFIG_NRF_MODEM_LIB_SYSTEM_MODE_DECT_NR=y

#==============================================================================
# DECT NR+ Driver Stack Configuration
#==============================================================================
CONFIG_DECT_NRPLUS_STACK=y
CONFIG_DECT_MAC_LAYER=y
CONFIG_DECT_DLC_LAYER=y
CONFIG_DECT_CVG_LAYER=y

# Enable the driver's internal threads for real-world operation
CONFIG_DECT_MAC_OWN_THREAD=y
CONFIG_DECT_STACK_HAS_APP_THREADS=y

# Set a realistic beacon period for hardware testing
# CONFIG_DECT_MAC_FT_CLUSTER_BEACON_PERIOD_MS=1000

# Configure the PT to scan on the default channels
# CONFIG_DECT_MAC_PT_SCAN_CHANNELS="0,1,2,3,4"

# Enable security (optional, but recommended for full stack testing)
# You will need to provide a PSK in the application or via Kconfig
# CONFIG_DECT_MAC_SECURITY_ENABLE=y
# CONFIG_DECT_CVG_SECURITY_ENABLE=y
# CONFIG_CRYPTO=y
# CONFIG_CRYPTO_MBEDTLS=y

#==============================================================================
# Networking Stack (for future phases)
#==============================================================================
# Although the stack_integration test doesn't use the IP stack directly,
# these are the options you will need for Phase 4.
# CONFIG_NETWORKING=y
# CONFIG_NET_L2_DECT_NRPLUS=y
# CONFIG_NET_IPV6=y
# CONFIG_NET_CONFIG_SETTINGS=y
# CONFIG_NET_CONFIG_NEED_IPV6=y

#==============================================================================
# Priority 1: Disable All Diagnostics
#==============================================================================
# Turn off the entire logging subsystem
CONFIG_LOG=n


# Turn off console for maximum size reduction
CONFIG_UART_CONSOLE=n
CONFIG_CONSOLE=n

# Disable the shell
CONFIG_SHELL=n

# Disable kernel assertions in production to save space
CONFIG_ASSERT=n

#==============================================================================
# Priority 2: Tune Buffer Sizes and Counts
#==============================================================================
# Reduce the number of small MAC-level buffers. Default is 36.
# Trade-off: Reduced capacity to handle bursts of small packets.
# CONFIG_DECT_MAC_SDU_BUFFER_COUNT=16

# Reduce the size of the largest possible application packet. Default is 1500.
# This has the BIGGEST impact on RAM. Tune this to the actual max packet
# size your application will ever send or receive.
# Trade-off: Cannot transport standard 1500-byte IP packets.
CONFIG_DECT_DLC_MAX_SDU_PAYLOAD_SIZE=512

# NOTE: The number of concurrent reassembly sessions and ARQ jobs are
# currently hardcoded in dect_dlc.c (MAX_DLC_REASSEMBLY_SESSIONS and
# MAX_DLC_RETRANSMISSION_JOBS). To further reduce RAM, you would need to
# lower these values and recompile.

#==============================================================================
# Priority 3: Disable Security Features
#==============================================================================
# If your application does not need security, disabling it provides large
# Flash savings by removing the crypto library.
CONFIG_DECT_MAC_SECURITY_ENABLE=n
CONFIG_DECT_CVG_SECURITY_ENABLE=n
CONFIG_CRYPTO=n

#==============================================================================
# Priority 4: Reduce Thread Stack Sizes
#==============================================================================
# WARNING: Reducing these without analysis can cause stack overflows.
# Use CONFIG_THREAD_ANALYZER to find the actual high-water mark for your use case.
# Defaults are typically 2048 or higher.
CONFIG_DECT_MAC_THREAD_STACK_SIZE=1024
CONFIG_DECT_DLC_RX_THREAD_STACK_SIZE=1024
CONFIG_DECT_DLC_TX_SERVICE_THREAD_STACK_SIZE=1024
CONFIG_DECT_CVG_TX_THREAD_STACK_SIZE=1024
CONFIG_DECT_CVG_RX_THREAD_STACK_SIZE=1024
CONFIG_DECT_CVG_TX_SERVICE_THREAD_STACK_SIZE=1024

#==============================================================================
# General System & Compiler Optimizations
#==============================================================================
# These are standard Zephyr settings for size optimization.
CONFIG_SIZE_OPTIMIZATIONS=y
CONFIG_NO_OPTIMIZATIONS=n
CONFIG_DEBUG=n

# If not using malloc/free, you can reclaim the heap memory.
CONFIG_HEAP_MEM_POOL_SIZE=0