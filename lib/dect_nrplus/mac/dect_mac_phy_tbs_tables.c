/* dect_mac/dect_mac_phy_tbs_tables.c */
#include <stdint.h>
#include <mac/dect_mac_phy_tbs_tables.h>

// ETSI TS 103 636-3 V2.1.1 (2024-10), Table C.2-1:
// PDSCH Transport block size Tb(j) (in bits) for single slot transmission,
// single spatial stream, with maximum turbo code block size of 2048 bits.
// This table is for: mu=1, beta=1
// Indexed as: tbs_single_slot_mu1_beta1[MCS_INDEX][j-1_SUBOTS]
const uint32_t tbs_single_slot_mu1_beta1[TBS_MAX_MCS_INDEX + 1][TBS_MAX_SUB_SLOTS_J] = {
    // j=     1,     2,     3,     4,     5,     6,     7,     8,      9,     10,     11,     12,     13,     14,     15,     16
    /*MCS0*/{  136,   344,   520,   760,   936,  1128,  1320,  1576,   1768,   1992,   2168,   2424,   2616,   2808,   3000,   3192},
    /*MCS1*/{  296,   712,  1064,  1448,  1800,  2104,  2424,  2872,   3128,   3576,   3832,   4320,   4576,   4832,   5408,   5736},
    /*MCS2*/{  456,  1064,  1576,  2104,  2616,  3064,  3576,  4224,   4576,   5216,   5536,   6208,   6592,   6984,   7752,   8144},
    /*MCS3*/{  616,  1448,  2104,  2808,  3512,  4096,  4768,  5600,   6048,   6816,   7240,   8144,   8648,   9152,  10000,  10456},
    /*MCS4*/{  936,  2168,  3192,  4256,  5344,  6208,  7240,  8480,   9152,  10328,  10960,  12280,  13032,  13784,  15040,  15760},
    /*MCS5*/{ 1128,  2616,  3832,  5080,  6368,  7456,  8648, 10000,  10960,  12280,  13032,  14560,  15520,  16480,  18000,  18928},
    /*MCS6*/{ 1320,  3064,  4512,  6048,  7560,  8832, 10328, 11904,  13032,  14560,  15520,  17376,  18496,  19608,  21408,  22528},
    /*MCS7*/{ 1576,  3576,  5216,  6984,  8648, 10000, 11904, 13784,  15040,  16736,  17920,  20032,  21408,  22528,  24704,  26016},
    /*MCS8*/{ 1768,  4224,  6208,  8144, 10000, 11904, 13784, 15760,  17376,  19256,  20736,  23104,  24704,  26016,  28416,  30000},
    /*MCS9*/{ 2104,  4768,  6984,  9152, 11280, 13032, 15040, 17376,  18928,  21088,  22528,  25312,  26880,  28416,  31040,  32800},
    /*MCS10*/{2424,  5536,  8144, 10456, 13032, 15040, 17376, 20032,  21920,  24704,  26016,  29120,  31040,  32800,  35776,  37760},
    /*MCS11*/{2872,  6208,  9152, 11904, 14560, 16736, 19256, 22528,  24704,  27424,  29120,  32800,  34816,  36736,  40000,  42112}
};

/* ETSI TS 103 636-3 V2.1.1, Table C.3-1 (Dual Slot Transmission) */
/* mu=2, beta=1. Padded with 0 for j=1 as it's not applicable. */
const uint32_t tbs_single_slot_mu2_beta1[TBS_MAX_MCS_INDEX + 1][TBS_MAX_SUB_SLOTS_J] = {
	/* j=      1,     2,     3,     4,     5,     6,     7,     8,      9,     10,     11,     12,     13,     14,     15,     16 */
	/* MCS0*/ { 0, 808, 1216, 1704, 2040, 2424, 2808, 3192, 3640, 4000, 4384, 4832, 5216, 5600, 5984, 6368 },
	/* MCS1*/ { 0, 1640, 2424, 3384, 4096, 4832, 5600, 6368, 7240, 7944, 8648, 9520, 10328, 11096, 11904, 12656 },
	/* MCS2*/ { 0, 2424, 3640, 5088, 6048, 7240, 8304, 9520, 10648, 11664, 12656, 13888, 15040, 16080, 17248, 18264 },
	/* MCS3*/ { 0, 3256, 4832, 6792, 8144, 9712, 11096, 12656, 14208, 15520, 16896, 18496, 20032, 21248, 22856, 24240 },
	/* MCS4*/ { 0, 4960, 7368, 10264, 12280, 14560, 16896, 19256, 21616, 23680, 25696, 28080, 30336, 32256, 34816, 36800 },
	/* MCS5*/ { 0, 6600, 9712, 13504, 16224, 19256, 22240, 25312, 28416, 31040, 33600, 36800, 39648, 42112, 45760, 48320 },
	/* MCS6*/ { 0, 7496, 11096, 15520, 18496, 21920, 25312, 28800, 32256, 35328, 38304, 42112, 45120, 47968, 52160, 55040 },
	/* MCS7*/ { 0, 8304, 12280, 17248, 20736, 24704, 28416, 32800, 36800, 40384, 43840, 48320, 52160, 55040, 60160, 63488 },
	/* MCS8*/ { 0, 9968, 14848, 20736, 24704, 29440, 34048, 39296, 43840, 48320, 52160, 57600, 61888, 65536, 71680, 75648 },
	/* MCS9*/ { 0, 11096, 16480, 22856, 27648, 32800, 38304, 43840, 49152, 54080, 58592, 64512, 69440, 73600, 80320, 84864 },
	/*MCS10*/ { 0, 12480, 18496, 25696, 31040, 36800, 42880, 49152, 55040, 60800, 65536, 72320, 77824, 82560, 90240, 95232 },
	/*MCS11*/ { 0, 14016, 20736, 28800, 34816, 41216, 47968, 55040, 61888, 68160, 73600, 81280, 87360, 92800, 101120, 106496 }
};

/* ETSI TS 103 636-3 V2.1.1, Table C.4-1 (Quad Slot Transmission) */
/* mu=4, beta=1. Padded with 0 for j=1,2,3 as not applicable. */
const uint32_t tbs_single_slot_mu4_beta1[TBS_MAX_MCS_INDEX + 1][TBS_MAX_SUB_SLOTS_J] = {
	/* j=      1, 2, 3,     4,     5,     6,     7,     8,      9,     10,     11,     12,     13,     14,     15,     16 */
	/* MCS0*/ { 0, 0, 0, 1800, 2240, 2680, 3128, 3640, 4000, 4448, 4832, 5216, 5600, 5984, 6368, 6752 },
	/* MCS1*/ { 0, 0, 0, 3576, 4448, 5344, 6208, 7240, 7944, 8832, 9712, 10456, 11280, 11904, 12656, 13504 },
	/* MCS2*/ { 0, 0, 0, 5408, 6752, 8144, 9392, 10960, 12096, 13312, 14560, 15760, 16896, 17920, 19072, 20384 },
	/* MCS3*/ { 0, 0, 0, 7240, 9152, 10960, 12656, 14848, 16480, 18264, 19840, 21616, 23104, 24576, 26016, 27648 },
	/* MCS4*/ { 0, 0, 0, 10904, 13784, 16480, 19072, 22240, 24704, 27264, 29728, 32256, 34560, 36800, 39040, 41600 },
	/* MCS5*/ { 0, 0, 0, 14568, 18264, 21920, 25312, 29440, 32800, 36096, 39296, 42880, 45760, 48896, 51840, 55040 },
	/* MCS6*/ { 0, 0, 0, 16400, 20736, 24704, 28800, 33600, 37440, 41216, 44800, 48896, 52160, 55808, 59264, 63104 },
	/* MCS7*/ { 0, 0, 0, 18232, 22856, 27264, 31720, 37120, 41216, 45440, 49536, 53760, 57600, 61568, 65280, 69440 },
	/* MCS8*/ { 0, 0, 0, 22240, 27648, 33280, 38656, 45120, 50176, 55040, 60160, 65536, 70016, 74880, 79360, 84480 },
	/* MCS9*/ { 0, 0, 0, 24368, 30336, 36480, 42112, 49152, 54720, 60160, 65536, 71296, 76288, 81280, 86400, 91520 },
	/*MCS10*/ { 0, 0, 0, 27416, 34048, 40960, 47552, 55424, 61568, 67840, 73600, 80320, 86400, 91520, 97280, 103040 },
	/*MCS11*/ { 0, 0, 0, 31720, 39648, 47552, 55040, 64512, 71680, 78720, 85760, 93440, 100480, 106496, 113280, 120064 }
};
